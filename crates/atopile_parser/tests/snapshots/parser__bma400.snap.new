---
source: crates/atopile_parser/tests/parser.rs
assertion_line: 50
expression: output
snapshot_kind: text
---
(
    [
        Spanned(
            Import(
                ImportStmt {
                    from_path: Spanned(
                        "generics/interfaces.ato",
                        1..2,
                    ),
                    imports: [
                        Spanned(
                            Symbol(
                                "Power",
                            ),
                            3..4,
                        ),
                        Spanned(
                            Symbol(
                                "I2C",
                            ),
                            5..6,
                        ),
                        Spanned(
                            Symbol(
                                "SPI",
                            ),
                            7..8,
                        ),
                        Spanned(
                            Symbol(
                                "GPIO",
                            ),
                            9..10,
                        ),
                    ],
                },
            ),
            0..10,
        ),
        Spanned(
            Import(
                ImportStmt {
                    from_path: Spanned(
                        "generics/capacitors.ato",
                        1..2,
                    ),
                    imports: [
                        Spanned(
                            Symbol(
                                "Capacitor",
                            ),
                            3..4,
                        ),
                    ],
                },
            ),
            0..4,
        ),
        Spanned(
            Import(
                ImportStmt {
                    from_path: Spanned(
                        "_BMA400/BMA400.ato",
                        1..2,
                    ),
                    imports: [
                        Spanned(
                            Symbol(
                                "BMA400",
                            ),
                            3..4,
                        ),
                    ],
                },
            ),
            0..4,
        ),
        Spanned(
            Block(
                BlockStmt {
                    kind: Spanned(
                        Module,
                        0..1,
                    ),
                    name: Spanned(
                        Symbol(
                            "Bma400",
                        ),
                        1..2,
                    ),
                    parent: None,
                    body: [
                        Spanned(
                            Comment(
                                CommentStmt {
                                    comment: Spanned(
                                        "Ultra-low power triaxial accelerometer driver module based on the BMA400 from Bosch.",
                                        0..1,
                                    ),
                                },
                            ),
                            0..1,
                        ),
                        Spanned(
                            Comment(
                                CommentStmt {
                                    comment: Spanned(
                                        "Features:",
                                        0..1,
                                    ),
                                },
                            ),
                            0..1,
                        ),
                        Spanned(
                            Comment(
                                CommentStmt {
                                    comment: Spanned(
                                        "- Ultra-low power consumption (14.5μA in normal mode, 850nA in low-power mode)",
                                        0..1,
                                    ),
                                },
                            ),
                            0..1,
                        ),
                        Spanned(
                            Comment(
                                CommentStmt {
                                    comment: Spanned(
                                        "- 12-bit digital resolution",
                                        0..1,
                                    ),
                                },
                            ),
                            0..1,
                        ),
                        Spanned(
                            Comment(
                                CommentStmt {
                                    comment: Spanned(
                                        "- Programmable measurement ranges: ±2g, ±4g, ±8g, ±16g",
                                        0..1,
                                    ),
                                },
                            ),
                            0..1,
                        ),
                        Spanned(
                            Comment(
                                CommentStmt {
                                    comment: Spanned(
                                        "- Built-in power management with auto wake-up/sleep capability",
                                        0..1,
                                    ),
                                },
                            ),
                            0..1,
                        ),
                        Spanned(
                            Comment(
                                CommentStmt {
                                    comment: Spanned(
                                        "- Integrated FIFO (1KB)",
                                        0..1,
                                    ),
                                },
                            ),
                            0..1,
                        ),
                        Spanned(
                            Comment(
                                CommentStmt {
                                    comment: Spanned(
                                        "- Smart interrupts including:",
                                        0..1,
                                    ),
                                },
                            ),
                            0..1,
                        ),
                        Spanned(
                            Comment(
                                CommentStmt {
                                    comment: Spanned(
                                        "- Activity/inactivity detection",
                                        0..1,
                                    ),
                                },
                            ),
                            0..1,
                        ),
                        Spanned(
                            Comment(
                                CommentStmt {
                                    comment: Spanned(
                                        "- Step counting with low power consumption (4μA)",
                                        0..1,
                                    ),
                                },
                            ),
                            0..1,
                        ),
                        Spanned(
                            Comment(
                                CommentStmt {
                                    comment: Spanned(
                                        "- Orientation detection",
                                        0..1,
                                    ),
                                },
                            ),
                            0..1,
                        ),
                        Spanned(
                            Comment(
                                CommentStmt {
                                    comment: Spanned(
                                        "- Tap/double-tap sensing",
                                        0..1,
                                    ),
                                },
                            ),
                            0..1,
                        ),
                        Spanned(
                            Comment(
                                CommentStmt {
                                    comment: Spanned(
                                        "- Digital interfaces: I2C or SPI",
                                        0..1,
                                    ),
                                },
                            ),
                            0..1,
                        ),
                        Spanned(
                            Comment(
                                CommentStmt {
                                    comment: Spanned(
                                        "- VDDIO voltage range: 1.2V to 3.6V",
                                        0..1,
                                    ),
                                },
                            ),
                            0..1,
                        ),
                        Spanned(
                            Comment(
                                CommentStmt {
                                    comment: Spanned(
                                        "- VDD voltage range: 1.7V to 3.6V",
                                        0..1,
                                    ),
                                },
                            ),
                            0..1,
                        ),
                        Spanned(
                            Comment(
                                CommentStmt {
                                    comment: Spanned(
                                        "Example Usage:",
                                        0..1,
                                    ),
                                },
                            ),
                            0..1,
                        ),
                        Spanned(
                            Comment(
                                CommentStmt {
                                    comment: Spanned(
                                        "```",
                                        0..1,
                                    ),
                                },
                            ),
                            0..1,
                        ),
                        Spanned(
                            Comment(
                                CommentStmt {
                                    comment: Spanned(
                                        "from 'generics/interfaces.ato' import Power, I2C, GPIO",
                                        0..1,
                                    ),
                                },
                            ),
                            0..1,
                        ),
                        Spanned(
                            Comment(
                                CommentStmt {
                                    comment: Spanned(
                                        "from 'bma400/bma400.ato' import Bma400, Bma400_I2C",
                                        0..1,
                                    ),
                                },
                            ),
                            0..1,
                        ),
                        Spanned(
                            Comment(
                                CommentStmt {
                                    comment: Spanned(
                                        "module UserBoard:",
                                        0..1,
                                    ),
                                },
                            ),
                            0..1,
                        ),
                        Spanned(
                            Comment(
                                CommentStmt {
                                    comment: Spanned(
                                        "'''User board with BMA400 accelerometer'''",
                                        0..1,
                                    ),
                                },
                            ),
                            0..1,
                        ),
                        Spanned(
                            Comment(
                                CommentStmt {
                                    comment: Spanned(
                                        "# Interfaces",
                                        0..1,
                                    ),
                                },
                            ),
                            0..1,
                        ),
                        Spanned(
                            Comment(
                                CommentStmt {
                                    comment: Spanned(
                                        "power_1v8 = new Power  # 1.8V power supply",
                                        0..1,
                                    ),
                                },
                            ),
                            0..1,
                        ),
                        Spanned(
                            Comment(
                                CommentStmt {
                                    comment: Spanned(
                                        "i2c = new I2C          # I2C bus",
                                        0..1,
                                    ),
                                },
                            ),
                            0..1,
                        ),
                        Spanned(
                            Comment(
                                CommentStmt {
                                    comment: Spanned(
                                        "int1 = new GPIO        # Interrupt 1 input",
                                        0..1,
                                    ),
                                },
                            ),
                            0..1,
                        ),
                        Spanned(
                            Comment(
                                CommentStmt {
                                    comment: Spanned(
                                        "# Accelerometer",
                                        0..1,
                                    ),
                                },
                            ),
                            0..1,
                        ),
                        Spanned(
                            Comment(
                                CommentStmt {
                                    comment: Spanned(
                                        "accel = new Bma400",
                                        0..1,
                                    ),
                                },
                            ),
                            0..1,
                        ),
                        Spanned(
                            Comment(
                                CommentStmt {
                                    comment: Spanned(
                                        "accel.ic -> Bma400_I2C  # Use I2C interface",
                                        0..1,
                                    ),
                                },
                            ),
                            0..1,
                        ),
                        Spanned(
                            Comment(
                                CommentStmt {
                                    comment: Spanned(
                                        "# Connections",
                                        0..1,
                                    ),
                                },
                            ),
                            0..1,
                        ),
                        Spanned(
                            Comment(
                                CommentStmt {
                                    comment: Spanned(
                                        "accel.power ~ power_1v8",
                                        0..1,
                                    ),
                                },
                            ),
                            0..1,
                        ),
                        Spanned(
                            Comment(
                                CommentStmt {
                                    comment: Spanned(
                                        "accel.i2c ~ i2c",
                                        0..1,
                                    ),
                                },
                            ),
                            0..1,
                        ),
                        Spanned(
                            Comment(
                                CommentStmt {
                                    comment: Spanned(
                                        "accel.int1 ~ int1",
                                        0..1,
                                    ),
                                },
                            ),
                            0..1,
                        ),
                        Spanned(
                            Comment(
                                CommentStmt {
                                    comment: Spanned(
                                        "```",
                                        0..1,
                                    ),
                                },
                            ),
                            0..1,
                        ),
                        Spanned(
                            Signal(
                                SignalStmt {
                                    name: Spanned(
                                        Symbol(
                                            "gnd",
                                        ),
                                        1..2,
                                    ),
                                },
                            ),
                            0..2,
                        ),
                    ],
                },
            ),
            22..106,
        ),
    ],
    [],
)
